(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var UserManagementApp = angular.module('UserManagementApp', [
    'ui.router',
    'ui.bootstrap',
    'ngAnimate',
    'sun.scrollable',
    'toastr',
    'ui.validate',
    'ngMessages',
    'ngFileUpload',
    'ngSanitize',
    'ui.select',
    // require('./common').name,
    // require('./config').name,
    require('./modules').name
])
.run(['$rootScope','$state', function($rootScope, $state){
	$rootScope.state= $state;
	console.log("in run");
}])
.config(['$urlRouterProvider', function($urlRouterProvider) {
         $urlRouterProvider.when('', '/login');
         $urlRouterProvider.when('/', '/dashboard');
         $urlRouterProvider.otherwise('/404');
         // $urlRouterProvider.otherwise('/dashboard');
     }]);
angular.element(document).ready(function() {
         angular.bootstrap(document, ["UserManagementApp"]);
     });
},{"./modules":2}],2:[function(require,module,exports){
'use strict';
module.exports = angular.module('Modules', [
        require('./user').name,
    ])
    .run(['$rootScope', 'toastr', '$state', function($rootScope, toastr, $state) {
        $rootScope.$on('$stateChangeStart', function(event, toState, toParams, fromState, fromParams) {
           console.log("stateChangeStart", toState, fromState);
        });
        $rootScope.$on('$stateChangeError', function(event, current, previous, rejection) {
            console.log('$stateChangeError', arguments);
        });
        $rootScope.$on('$stateChangeSuccess', function(event, current, previous, rejection) {
            $rootScope.loader = false;
        });
    }]);

},{"./user":5}],3:[function(require,module,exports){
'use strict';
module.exports = [
'$scope',
'$state',
'$rootScope',
'LoginService',
function($scope,$state,$rootscope,LoginService){
	var vm=this;
	console.log("user data after logging in",LoginService.loggedInUserDetails());
	vm.logOut=function(){
		console.log("loggedout");
		$state.go('login');
		// console.log("after logout details",LoginService.loginPermission.userDetails);
	}
}]
},{}],4:[function(require,module,exports){
'use strict';
module.exports = [
'$scope',
'$state',
'$rootScope',
'LoginService',
function($scope,$state,$rootscope,LoginService){
	var vm=this;
	var loginPermission=false;
	vm.logIn=function(){
		// var data = LoginService.getUserDetails();
		// console.log("user data", data.name,data.password);
		var data={
			name:vm.userName,
			password:vm.password
		}
		var userDetails=LoginService.loginPermission(data);
		console.log("details",userDetails);
		if(Object.keys(userDetails).length === 0){
			loginPermission=false;
			console.log("unsuccessful",loginPermission);	
		}
		else
		{  
			loginPermission=true;
			console.log("successful",loginPermission);
			$state.go('dashboard');
		}
			
		}
	}
]
},{}],5:[function(require,module,exports){
'use strict';
/**
 * @memberof Modules
 * @ngdoc module
 * @name User
 * @description 
 *    User module holds all User related services, controllers, state. 
 */
module.exports = angular.module('User', [])
    .config(['$stateProvider', '$urlRouterProvider', function($stateProvider, $urlRouterProvider) {
        $stateProvider
            .state('login', {
                url: "/login",
                template: require('./templates/login.html'),
                controller: 'LoginController as vm',
                // pageTitle: 'login-page'
            })
            .state('dashboard', {
                url: "/dashboard",
                // abstract: true,
                template: require('./templates/dashboard.html'),
                controller: 'DashboardController as vm'
                // resolve: {
                //     userInfo: ['UserService', function(UserService) {
                //         return UserService.getUserInfo();
                //     }]
                // }
            })
    }])
    .controller('LoginController', require("./controllers/loginController.js"))
    .controller('DashboardController', require("./controllers/dashboardController.js"))
    .service('LoginService', require("./services/logInService.js"));

},{"./controllers/dashboardController.js":3,"./controllers/loginController.js":4,"./services/logInService.js":6,"./templates/dashboard.html":7,"./templates/login.html":8}],6:[function(require,module,exports){
'use strict';
module.exports = [
    function() {
        var currentUserDetails = {};

        function getUserDetails() {
            var data = [{
                name: "pallavi",
                password: "abc",
                access: "admin"
            }, {
                name: "Rajesh",
                password: "xyz",
                access: "user"
            }, {
                name: "Deblina",
                password: "desi",
                access: "user"
            }];
            return data;
        };

        function loginPermission(data) {
            var userDetails = {};
            var userData = getUserDetails();
            for (var i = 0; i < userData.length; i++) {
                if (data.name === userData[i].name && data.password === userData[i].password) {
                    console.log("data from service",userData[i]);
                    userDetails = {
                        name: userData[i].name,
                        password: userData[i].password,
                        accessPermission: userData[i].access
                    };
                    currentUserDetails=userDetails;
                    console.log("sucessful");
                    break;
                }
            }
            return userDetails;
        };

        function loggedInUserDetails() {
            return currentUserDetails;
        }
        return {
            getUserDetails: getUserDetails,
            loginPermission: loginPermission,
            loggedInUserDetails: loggedInUserDetails
        };
    }
]

},{}],7:[function(require,module,exports){
module.exports = "<p>dashboard</p><button ng-click=vm.logOut()>Logout</button>";

},{}],8:[function(require,module,exports){
module.exports = "<div class=login-container><div class=row><div class=col-sm-6></div><div class=col-sm-6><form method=post role=form id=login class=\"login-form fade-in-effect in\"><div class=login-header><a href=\"\" class=logo></a><p>Dear user, log in to the User Management System</p></div><div class=login-body><form>Username/Email: <input type=text name=email ng-model=vm.userName><br>Password: <input type=text name=password ng-model=vm.password><br><input type=submit value=Submit ng-click=vm.logIn()></form></div></form></div></div></div>";

},{}]},{},[1])